= Kubernetes Demo Script

== Getting Started

. Create Kubernetes cluster: `NUM_NODES=2 NODE_SIZE=m3.medium KUBERNETES_PROVIDER=aws kube-up.sh`
. Show cluster information: `kubectl.sh cluster-info`
. Show nodes: `kubectl.sh get nodes`

== Create Resources

=== Pod

==== Using CLI

. Create pod: `kubectl.sh run wildfly --image=jboss/wildfly --port=8080`
.. Creates a Deployment or Job
. Check status: `kubectl.sh get -w pods`
.. Show the pod name derived from the Deployment name
. Describe pod: `kubectl.sh describe pod <name>` or `kubectl.sh describe pod/<name>`
. Get logs: `kubectl.sh logs <pod-name>`
.. Use `-f` to tail logs
. Get deployments: `kubectl.sh get deployments`
. Delete deployments: `kubectl.sh delete deployments/wildfly`
. Get deployments: `kubectl.sh get deployments`
. Get pods: `kubectl.sh get pods`

==== Using Configuration File

. Create pod: `kubectl.sh create -f wildfly-pod.yaml`
. Get pods: `kubectl.sh get pods`
.. Wide: `kubectl.sh get pods -o wide`
.. YAML: `kubectl.sh get pods -o yaml`
.. JSON: `kubectl.sh get pods -o json`
. Describe pod: `kubectl.sh describe pod/wildfly-pod`
. Delete pod: `kubectl.sh delete pod/wildfly-pod`
. Get pods: `kubectl.sh get pods`

=== Replication Controller

. Create RC: `kubectl.sh create -f wildfly-rc.yaml`
. Get RC: `kubectl.sh get rc`
. Get pods: `kubectl.sh get pods`
.. Show pod names
. Get pods created by RC: `kubectl.sh describe pods wildfly-rc`
. Get pods with a specified label: `kubectl.sh get pods -l name=wildfly`

=== Service

. Create Service: `kubectl.sh create -f wildfly-service.yaml`
. Get RC, Service and Pods: `kubectl.sh get rc,service,pods`
. Describe service: `kubectl.sh describe service wildfly-service`
. Access WildFly landing page
.. Get the value of `LoadBalancer Ingress`, access the WildFly landing page at `<IP>:8080`
. Start proxy: `kubectl.sh proxy`
. Delete multiple resources: `kubectl.sh delete rc/wildfly-rc service/wildfly-service`

== Namespaces

. Show pods in all namespaces: `kubectl.sh get pods --all-namespaces`

=== Tips

. Create resources in all `.json`, `.yaml` and `.yml` files in dir: `kubectl.sh create -f ./dir`
